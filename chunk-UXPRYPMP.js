import{A as d,B as _,C as X,D as P,E as w,F as N,G as Y,H as O,I as E,J as $,K as Z,L as ee,P as te,R as A,S as z,W as k,X as ie,Z as ne,a as q,b as G,c as U,d as K,e as S,f as Q,g as V,h as W,i as h,j as R,k as D,l as F,m as T,n as l,o as u,p as f,q as m,r as o,s as i,t as p,u as M,v as g,w as y,x as b,y as j,z as r}from"./chunk-CA2JJ7TA.js";var v=(()=>{let e=class e{getCountriesRequest(t){return this.http.get(t).pipe(U(()=>q([])))}searchByCapital(t){let n=`${this.urlAPI}capital/${t}`;return this.getCountriesRequest(n).pipe(S(s=>this.cacheStore.byCapital={term:t,countries:s}),S(()=>this.saveToLocalStorage()))}searchByCountry(t){let n=`${this.urlAPI}name/${t}`;return this.getCountriesRequest(n).pipe(S(s=>this.cacheStore.byCountry={term:t,countries:s}),S(()=>this.saveToLocalStorage()))}searchByRegion(t){let n=`${this.urlAPI}region/${t}`;return this.getCountriesRequest(n).pipe(S(s=>this.cacheStore.byRegion={region:t,countries:s}),S(()=>this.saveToLocalStorage()))}searchByID(t){let n=`${this.urlAPI}alpha/${t}`;return this.http.get(n).pipe(G(s=>s.length>0?s[0]:null),U(()=>q(null)))}saveToLocalStorage(){localStorage.setItem("cacheStore",JSON.stringify(this.cacheStore))}loadToLocalStorage(){localStorage.getItem("cacheStore")&&(this.cacheStore=JSON.parse(localStorage.getItem("cacheStore")))}constructor(t){this.http=t,this.urlAPI="https://restcountries.com/v3.1/",this.cacheStore={byCapital:{term:"",countries:[]},byCountry:{term:"",countries:[]},byRegion:{region:"",countries:[]}},this.loadToLocalStorage()}};e.\u0275fac=function(n){return new(n||e)(W(ee))},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let a=e;return a})();function pe(a,e){a&1&&(o(0,"div",2),r(1,` No hay paises que mostrar
`),i())}function me(a,e){if(a&1){let c=M();o(0,"tr")(1,"td"),r(2),i(),o(3,"td"),r(4),i(),o(5,"td"),r(6),i(),o(7,"td"),r(8),P(9,"number"),i(),o(10,"td"),p(11,"img",5),i(),o(12,"td")(13,"button",6),g("click",function(){let n=D(c).$implicit,s=y(2);return F(s.redirecciona(n.cca3))}),r(14,"Ver"),i()()()}if(a&2){let c=e.$implicit,t=e.index;l(2),d(t+1),l(2),d(c.name.official),l(2),d(c.capital),l(2),d(w(9,6,c.population)),l(3),b("alt",c.name.official),m("src",c.flags.png,T)}}function de(a,e){if(a&1&&(o(0,"table",3)(1,"thead")(2,"tr")(3,"th"),r(4,"#"),i(),o(5,"th"),r(6,"Nombre"),i(),o(7,"th"),r(8,"Capital"),i(),o(9,"th"),r(10,"Poblaci\xF3n"),i(),o(11,"th"),r(12,"Bandera"),i(),p(13,"th"),i()(),o(14,"tbody"),f(15,me,15,8,"tr",4),i()()),a&2){let c=y();l(15),m("ngForOf",c.capitals)}}var B=(()=>{let e=class e{redirecciona(t){console.log(t),this.route.navigateByUrl(`/countries/by/${t}`)}constructor(t){this.route=t,this.capitals=[]}};e.\u0275fac=function(n){return new(n||e)(u(A))},e.\u0275cmp=h({type:e,selectors:[["countries-country-table"]],inputs:{capitals:"capitals"},decls:3,vars:2,consts:[["table",""],["class","alert alert-warning text-center",4,"ngIf","ngIfElse"],[1,"alert","alert-warning","text-center"],[1,"table","table-hover"],[4,"ngFor","ngForOf"],[2,"width","50px",3,"src","alt"],[1,"btn","btn-primary",3,"click"]],template:function(n,s){if(n&1&&f(0,pe,2,0,"div",1)(1,de,16,1,"ng-template",null,0,N),n&2){let C=j(2);m("ngIf",s.capitals.length==0)("ngIfElse",C)}},dependencies:[O,E,$]});let a=e;return a})();function he(a,e){a&1&&p(0,"shared-loading-spinner")}var ae=(()=>{let e=class e{searchByCapital(t){this.loaded=!1,console.log("Desde byCapital",t),this.countriesService.searchByCapital(t).subscribe(n=>{console.log(n),this.capitals=n,this.loaded=!0})}constructor(t){this.countriesService=t,this.capitals=[],this.loaded=!0,this.initialValue=""}ngOnInit(){this.capitals=this.countriesService.cacheStore.byCapital.countries,this.initialValue=this.countriesService.cacheStore.byCapital.term}};e.\u0275fac=function(n){return new(n||e)(u(v))},e.\u0275cmp=h({type:e,selectors:[["countries-by-capital-page"]],decls:11,vars:4,consts:[[1,"row"],[1,"col"],[3,"onValue","onDebounce","placeholder","initialValue"],[4,"ngIf"],[3,"capitals"]],template:function(n,s){n&1&&(o(0,"h2"),r(1,"Por Capital"),i(),p(2,"hr"),o(3,"div",0)(4,"div",1)(5,"shared-search-box",2),g("onValue",function(x){return s.searchByCapital(x)})("onDebounce",function(x){return s.searchByCapital(x)}),i()()(),o(6,"div",0)(7,"div",1),p(8,"hr"),f(9,he,1,0,"shared-loading-spinner",3),p(10,"countries-country-table",4),i()()),n&2&&(l(5),m("placeholder","Buscar por capital")("initialValue",s.initialValue),l(4),m("ngIf",!s.loaded),l(),m("capitals",s.capitals))},dependencies:[E,k,ie,B]});let a=e;return a})();var oe=(()=>{let e=class e{searchByCountry(t){this.countriesService.searchByCountry(t).subscribe(n=>{console.log(n),this.capitals=n})}constructor(t){this.countriesService=t,this.capitals=[],this.initialValue=""}ngOnInit(){this.capitals=this.countriesService.cacheStore.byCountry.countries,this.initialValue=this.countriesService.cacheStore.byCountry.term}};e.\u0275fac=function(n){return new(n||e)(u(v))},e.\u0275cmp=h({type:e,selectors:[["countries-by-country-page"]],decls:10,vars:3,consts:[[1,"row"],[1,"col"],[3,"onValue","onDebounce","placeholder","initialValue"],[3,"capitals"]],template:function(n,s){n&1&&(o(0,"h2"),r(1,"Por Capital"),i(),p(2,"hr"),o(3,"div",0)(4,"div",1)(5,"shared-search-box",2),g("onValue",function(x){return s.searchByCountry(x)})("onDebounce",function(x){return s.searchByCountry(x)}),i()()(),o(6,"div",0)(7,"div",1),p(8,"hr")(9,"countries-country-table",3),i()()),n&2&&(l(5),m("placeholder","Buscar por pais")("initialValue",s.initialValue),l(4),m("capitals",s.capitals))},dependencies:[k,B]});let a=e;return a})();var fe=a=>({"btn-outline-primary":a});function ge(a,e){if(a&1){let c=M();o(0,"button",5),g("click",function(){let n=D(c).$implicit,s=y();return F(s.searchByRegion(n))}),r(1),i()}if(a&2){let c=e.$implicit,t=y();m("ngClass",X(2,fe,t.seleccionado===c)),l(),_(" ",c," ")}}var re=(()=>{let e=class e{searchByRegion(t){this.countriesService.searchByRegion(t).subscribe(n=>{this.capitals=n,this.seleccionado=t})}constructor(t){this.countriesService=t,this.capitals=[],this.regions=["Africa","Americas","Asia","Oceania","Europe"],this.seleccionado="",this.initialValue=""}ngOnInit(){this.capitals=this.countriesService.cacheStore.byRegion.countries,this.initialValue,this.seleccionado=this.countriesService.cacheStore.byRegion.region}};e.\u0275fac=function(n){return new(n||e)(u(v))},e.\u0275cmp=h({type:e,selectors:[["countries-by-region-page"]],decls:10,vars:2,consts:[[1,"row"],[1,"col","text-center"],["class","btn mx-2",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"col"],[3,"capitals"],[1,"btn","mx-2",3,"click","ngClass"]],template:function(n,s){n&1&&(o(0,"h2"),r(1,"Por Capital"),i(),p(2,"hr"),o(3,"div",0)(4,"div",1),f(5,ge,2,4,"button",2),i()(),o(6,"div",0)(7,"div",3),p(8,"hr")(9,"countries-country-table",4),i()()),n&2&&(l(5),m("ngForOf",s.regions),l(4),m("capitals",s.capitals))},dependencies:[Y,O,B]});let a=e;return a})();function ye(a,e){a&1&&(o(0,"div",2),r(1," Espere porfavor "),i())}function ve(a,e){if(a&1&&(o(0,"div")(1,"div",3)(2,"div",4)(3,"h2"),r(4,"Pais: "),o(5,"strong"),r(6),i()(),p(7,"hr"),i()(),o(8,"div",3)(9,"div",5)(10,"h3"),r(11,"Bandera"),i(),p(12,"img",6)(13,"hr"),o(14,"h3"),r(15,"Escudo"),i(),p(16,"img",6),i(),o(17,"div",7)(18,"h3"),r(19,"Informacion"),i(),o(20,"ul",8)(21,"li",9)(22,"strong"),r(23,"Poblacion"),i(),r(24),P(25,"number"),i(),o(26,"li",9)(27,"strong"),r(28,"Capital"),i(),r(29),i(),o(30,"li",9)(31,"strong"),r(32,"Region"),i(),r(33),i(),o(34,"li",9)(35,"strong"),r(36,"Area"),i(),r(37),P(38,"number"),i()()()(),o(39,"div",10)(40,"div",7)(41,"h3"),r(42,"Traducciones"),i(),o(43,"div",11)(44,"span",12),r(45),i(),o(46,"span",12),r(47),i(),o(48,"span",12),r(49),i(),o(50,"span",12),r(51),i(),o(52,"span",12),r(53),i(),o(54,"span",12),r(55),i(),o(56,"span",12),r(57),i(),o(58,"span",12),r(59),i()()()()()),a&2){let c=y();l(6),d(c.capitals.name.common),l(6),b("src",c.capitals.flags.png,T),b("alt",c.capitals.name.common),l(4),b("src",c.capitals.coatOfArms.png,T),b("alt",c.capitals.name.common),l(8),_(" ",w(25,17,c.capitals.population)," "),l(5),_(" ",c.capitals.capital," "),l(4),_(" ",c.capitals.region," "),l(4),_(" ",w(38,19,c.capitals.area)," "),l(8),d(c.capitals.translations.spa.common),l(2),d(c.capitals.translations.bre.common),l(2),d(c.capitals.translations.ces.common),l(2),d(c.capitals.translations.deu.common),l(2),d(c.capitals.translations.cym.common),l(2),d(c.capitals.translations.ita.common),l(2),d(c.capitals.translations.jpn.common),l(2),d(c.capitals.translations.kor.common)}}var le=(()=>{let e=class e{constructor(t,n,s){this.activatedRoute=t,this.countriesService=n,this.router=s}ngOnInit(){this.activatedRoute.params.pipe(K(({id:t})=>this.countriesService.searchByID(t))).subscribe(t=>{if(!t)return this.router.navigateByUrl("/countries");this.capitals=t})}};e.\u0275fac=function(n){return new(n||e)(u(te),u(v),u(A))},e.\u0275cmp=h({type:e,selectors:[["countries-country-page"]],decls:3,vars:2,consts:[["espera",""],[4,"ngIf","ngIfElse"],[1,"alert","alert-info"],[1,"row"],[1,"col-12"],[1,"col-4"],[2,"width","50px",3,"src","alt"],[1,"col"],[1,"list-group"],[1,"list-group-item"],[1,"row","mt-2"],[1,"d-flex","flex-wrap"],[1,"badge","bg-primary","m-1"]],template:function(n,s){if(n&1&&f(0,ye,2,0,"ng-template",null,0,N)(2,ve,60,21,"div",1),n&2){let C=j(1);l(2),m("ngIf",s.capitals)("ngIfElse",C)}},dependencies:[E,$]});let a=e;return a})();var Ce=[{path:"by-capital",component:ae},{path:"by-country",component:oe},{path:"by-region",component:re},{path:"by/:id",component:le},{path:"**",redirectTo:"by-capital",pathMatch:"full"}],ce=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=R({type:e}),e.\u0275inj=V({imports:[z.forChild(Ce),z]});let a=e;return a})();var Ge=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=R({type:e}),e.\u0275inj=V({imports:[Z,ce,ne]});let a=e;return a})();export{Ge as CountriesModule};
